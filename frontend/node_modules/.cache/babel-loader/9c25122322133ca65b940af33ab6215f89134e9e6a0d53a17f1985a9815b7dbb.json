{"ast":null,"code":"\"use strict\";\n\nconst {\n  Buffer\n} = require(\"buffer/\");\nconst punycode = require(\"punycode\");\nconst infra = require(\"./infra\");\nconst {\n  percentEncode,\n  percentDecode\n} = require(\"./urlencoded\");\nconst specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\nconst failure = Symbol(\"failure\");\nfunction countSymbols(str) {\n  return punycode.ucs2.decode(str).length;\n}\nfunction at(input, idx) {\n  const c = input[idx];\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\n}\nfunction isSingleDot(buffer) {\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\n}\nfunction isDoubleDot(buffer) {\n  buffer = buffer.toLowerCase();\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\n}\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\n  return infra.isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\n}\nfunction isWindowsDriveLetterString(string) {\n  return string.length === 2 && infra.isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\n}\nfunction isNormalizedWindowsDriveLetterString(string) {\n  return string.length === 2 && infra.isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\n}\nfunction containsForbiddenHostCodePoint(string) {\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\n}\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\n}\nfunction isSpecialScheme(scheme) {\n  return specialSchemes[scheme] !== undefined;\n}\nfunction isSpecial(url) {\n  return isSpecialScheme(url.scheme);\n}\nfunction isNotSpecial(url) {\n  return !isSpecialScheme(url.scheme);\n}\nfunction defaultPort(scheme) {\n  return specialSchemes[scheme];\n}\nfunction utf8PercentEncode(c) {\n  const buf = Buffer.from(c);\n  let str = \"\";\n  for (let i = 0; i < buf.length; ++i) {\n    str += percentEncode(buf[i]);\n  }\n  return str;\n}\nfunction isC0ControlPercentEncode(c) {\n  return c <= 0x1F || c > 0x7E;\n}\nconst extraUserinfoPercentEncodeSet = new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\nfunction isUserinfoPercentEncode(c) {\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\n}\nconst extraFragmentPercentEncodeSet = new Set([32, 34, 60, 62, 96]);\nfunction isFragmentPercentEncode(c) {\n  return isC0ControlPercentEncode(c) || extraFragmentPercentEncodeSet.has(c);\n}\nconst extraPathPercentEncodeSet = new Set([35, 63, 123, 125]);\nfunction isPathPercentEncode(c) {\n  return isFragmentPercentEncode(c) || extraPathPercentEncodeSet.has(c);\n}\nfunction percentEncodeChar(c, encodeSetPredicate) {\n  const cStr = String.fromCodePoint(c);\n  if (encodeSetPredicate(c)) {\n    return utf8PercentEncode(cStr);\n  }\n  return cStr;\n}\nfunction parseIPv4Number(input) {\n  let R = 10;\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\n    input = input.substring(2);\n    R = 16;\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\n    input = input.substring(1);\n    R = 8;\n  }\n  if (input === \"\") {\n    return 0;\n  }\n  let regex = /[^0-7]/;\n  if (R === 10) {\n    regex = /[^0-9]/;\n  }\n  if (R === 16) {\n    regex = /[^0-9A-Fa-f]/;\n  }\n  if (regex.test(input)) {\n    return failure;\n  }\n  return parseInt(input, R);\n}\nfunction parseIPv4(input) {\n  const parts = input.split(\".\");\n  if (parts[parts.length - 1] === \"\") {\n    if (parts.length > 1) {\n      parts.pop();\n    }\n  }\n  if (parts.length > 4) {\n    return input;\n  }\n  const numbers = [];\n  for (const part of parts) {\n    if (part === \"\") {\n      return input;\n    }\n    const n = parseIPv4Number(part);\n    if (n === failure) {\n      return input;\n    }\n    numbers.push(n);\n  }\n  for (let i = 0; i < numbers.length - 1; ++i) {\n    if (numbers[i] > 255) {\n      return failure;\n    }\n  }\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\n    return failure;\n  }\n  let ipv4 = numbers.pop();\n  let counter = 0;\n  for (const n of numbers) {\n    ipv4 += n * Math.pow(256, 3 - counter);\n    ++counter;\n  }\n  return ipv4;\n}\nfunction serializeIPv4(address) {\n  let output = \"\";\n  let n = address;\n  for (let i = 1; i <= 4; ++i) {\n    output = String(n % 256) + output;\n    if (i !== 4) {\n      output = \".\" + output;\n    }\n    n = Math.floor(n / 256);\n  }\n  return output;\n}\nfunction parseIPv6(input) {\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\n  let pieceIndex = 0;\n  let compress = null;\n  let pointer = 0;\n  input = punycode.ucs2.decode(input);\n  if (input[pointer] === 58) {\n    if (input[pointer + 1] !== 58) {\n      return failure;\n    }\n    pointer += 2;\n    ++pieceIndex;\n    compress = pieceIndex;\n  }\n  while (pointer < input.length) {\n    if (pieceIndex === 8) {\n      return failure;\n    }\n    if (input[pointer] === 58) {\n      if (compress !== null) {\n        return failure;\n      }\n      ++pointer;\n      ++pieceIndex;\n      compress = pieceIndex;\n      continue;\n    }\n    let value = 0;\n    let length = 0;\n    while (length < 4 && infra.isASCIIHex(input[pointer])) {\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\n      ++pointer;\n      ++length;\n    }\n    if (input[pointer] === 46) {\n      if (length === 0) {\n        return failure;\n      }\n      pointer -= length;\n      if (pieceIndex > 6) {\n        return failure;\n      }\n      let numbersSeen = 0;\n      while (input[pointer] !== undefined) {\n        let ipv4Piece = null;\n        if (numbersSeen > 0) {\n          if (input[pointer] === 46 && numbersSeen < 4) {\n            ++pointer;\n          } else {\n            return failure;\n          }\n        }\n        if (!infra.isASCIIDigit(input[pointer])) {\n          return failure;\n        }\n        while (infra.isASCIIDigit(input[pointer])) {\n          const number = parseInt(at(input, pointer));\n          if (ipv4Piece === null) {\n            ipv4Piece = number;\n          } else if (ipv4Piece === 0) {\n            return failure;\n          } else {\n            ipv4Piece = ipv4Piece * 10 + number;\n          }\n          if (ipv4Piece > 255) {\n            return failure;\n          }\n          ++pointer;\n        }\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\n        ++numbersSeen;\n        if (numbersSeen === 2 || numbersSeen === 4) {\n          ++pieceIndex;\n        }\n      }\n      if (numbersSeen !== 4) {\n        return failure;\n      }\n      break;\n    } else if (input[pointer] === 58) {\n      ++pointer;\n      if (input[pointer] === undefined) {\n        return failure;\n      }\n    } else if (input[pointer] !== undefined) {\n      return failure;\n    }\n    address[pieceIndex] = value;\n    ++pieceIndex;\n  }\n  if (compress !== null) {\n    let swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex !== 0 && swaps > 0) {\n      const temp = address[compress + swaps - 1];\n      address[compress + swaps - 1] = address[pieceIndex];\n      address[pieceIndex] = temp;\n      --pieceIndex;\n      --swaps;\n    }\n  } else if (compress === null && pieceIndex !== 8) {\n    return failure;\n  }\n  return address;\n}\nfunction serializeIPv6(address) {\n  let output = \"\";\n  const seqResult = findLongestZeroSequence(address);\n  const compress = seqResult.idx;\n  let ignore0 = false;\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\n    if (ignore0 && address[pieceIndex] === 0) {\n      continue;\n    } else if (ignore0) {\n      ignore0 = false;\n    }\n    if (compress === pieceIndex) {\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\n      output += separator;\n      ignore0 = true;\n      continue;\n    }\n    output += address[pieceIndex].toString(16);\n    if (pieceIndex !== 7) {\n      output += \":\";\n    }\n  }\n  return output;\n}\nfunction parseHost(input, isNotSpecialArg = false) {\n  if (input[0] === \"[\") {\n    if (input[input.length - 1] !== \"]\") {\n      return failure;\n    }\n    return parseIPv6(input.substring(1, input.length - 1));\n  }\n  if (isNotSpecialArg) {\n    return parseOpaqueHost(input);\n  }\n  const domain = percentDecode(Buffer.from(input)).toString();\n  const asciiDomain = domainToASCII(domain);\n  if (asciiDomain === failure) {\n    return failure;\n  }\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\n    return failure;\n  }\n  const ipv4Host = parseIPv4(asciiDomain);\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\n    return ipv4Host;\n  }\n  return asciiDomain;\n}\nfunction parseOpaqueHost(input) {\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\n    return failure;\n  }\n  let output = \"\";\n  const decoded = punycode.ucs2.decode(input);\n  for (let i = 0; i < decoded.length; ++i) {\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\n  }\n  return output;\n}\nfunction findLongestZeroSequence(arr) {\n  let maxIdx = null;\n  let maxLen = 1; // only find elements > 1\n  let currStart = null;\n  let currLen = 0;\n  for (let i = 0; i < arr.length; ++i) {\n    if (arr[i] !== 0) {\n      if (currLen > maxLen) {\n        maxIdx = currStart;\n        maxLen = currLen;\n      }\n      currStart = null;\n      currLen = 0;\n    } else {\n      if (currStart === null) {\n        currStart = i;\n      }\n      ++currLen;\n    }\n  }\n\n  // if trailing zeros\n  if (currLen > maxLen) {\n    maxIdx = currStart;\n    maxLen = currLen;\n  }\n  return {\n    idx: maxIdx,\n    len: maxLen\n  };\n}\nfunction serializeHost(host) {\n  if (typeof host === \"number\") {\n    return serializeIPv4(host);\n  }\n\n  // IPv6 serializer\n  if (host instanceof Array) {\n    return \"[\" + serializeIPv6(host) + \"]\";\n  }\n  return host;\n}\nfunction domainToASCII(domain) {\n  const result = domain;\n  if (result === null) {\n    return failure;\n  }\n  return result;\n}\nfunction trimControlChars(url) {\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\n}\nfunction trimTabAndNewline(url) {\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\n}\nfunction shortenPath(url) {\n  const {\n    path\n  } = url;\n  if (path.length === 0) {\n    return;\n  }\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\n    return;\n  }\n  path.pop();\n}\nfunction includesCredentials(url) {\n  return url.username !== \"\" || url.password !== \"\";\n}\nfunction cannotHaveAUsernamePasswordPort(url) {\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\n}\nfunction isNormalizedWindowsDriveLetter(string) {\n  return /^[A-Za-z]:$/.test(string);\n}\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\n  this.pointer = 0;\n  this.input = input;\n  this.base = base || null;\n  this.encodingOverride = encodingOverride || \"utf-8\";\n  this.stateOverride = stateOverride;\n  this.url = url;\n  this.failure = false;\n  this.parseError = false;\n  if (!this.url) {\n    this.url = {\n      scheme: \"\",\n      username: \"\",\n      password: \"\",\n      host: null,\n      port: null,\n      path: [],\n      query: null,\n      fragment: null,\n      cannotBeABaseURL: false\n    };\n    const res = trimControlChars(this.input);\n    if (res !== this.input) {\n      this.parseError = true;\n    }\n    this.input = res;\n  }\n  const res = trimTabAndNewline(this.input);\n  if (res !== this.input) {\n    this.parseError = true;\n  }\n  this.input = res;\n  this.state = stateOverride || \"scheme start\";\n  this.buffer = \"\";\n  this.atFlag = false;\n  this.arrFlag = false;\n  this.passwordTokenSeenFlag = false;\n  this.input = punycode.ucs2.decode(this.input);\n  for (; this.pointer <= this.input.length; ++this.pointer) {\n    const c = this.input[this.pointer];\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\n\n    // exec state machine\n    const ret = this[\"parse \" + this.state](c, cStr);\n    if (!ret) {\n      break; // terminate algorithm\n    } else if (ret === failure) {\n      this.failure = true;\n      break;\n    }\n  }\n}\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\n  if (infra.isASCIIAlpha(c)) {\n    this.buffer += cStr.toLowerCase();\n    this.state = \"scheme\";\n  } else if (!this.stateOverride) {\n    this.state = \"no scheme\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\n  if (infra.isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\n    this.buffer += cStr.toLowerCase();\n  } else if (c === 58) {\n    if (this.stateOverride) {\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\n        return false;\n      }\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\n        return false;\n      }\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\n        return false;\n      }\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\n        return false;\n      }\n    }\n    this.url.scheme = this.buffer;\n    if (this.stateOverride) {\n      if (this.url.port === defaultPort(this.url.scheme)) {\n        this.url.port = null;\n      }\n      return false;\n    }\n    this.buffer = \"\";\n    if (this.url.scheme === \"file\") {\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\n        this.parseError = true;\n      }\n      this.state = \"file\";\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\n      this.state = \"special relative or authority\";\n    } else if (isSpecial(this.url)) {\n      this.state = \"special authority slashes\";\n    } else if (this.input[this.pointer + 1] === 47) {\n      this.state = \"path or authority\";\n      ++this.pointer;\n    } else {\n      this.url.cannotBeABaseURL = true;\n      this.url.path.push(\"\");\n      this.state = \"cannot-be-a-base-URL path\";\n    }\n  } else if (!this.stateOverride) {\n    this.buffer = \"\";\n    this.state = \"no scheme\";\n    this.pointer = -1;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\n  if (this.base === null || this.base.cannotBeABaseURL && c !== 35) {\n    return failure;\n  } else if (this.base.cannotBeABaseURL && c === 35) {\n    this.url.scheme = this.base.scheme;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n    this.url.fragment = \"\";\n    this.url.cannotBeABaseURL = true;\n    this.state = \"fragment\";\n  } else if (this.base.scheme === \"file\") {\n    this.state = \"file\";\n    --this.pointer;\n  } else {\n    this.state = \"relative\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\n    this.state = \"special authority ignore slashes\";\n    ++this.pointer;\n  } else {\n    this.parseError = true;\n    this.state = \"relative\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\n  if (c === 47) {\n    this.state = \"authority\";\n  } else {\n    this.state = \"path\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\n  this.url.scheme = this.base.scheme;\n  if (isNaN(c)) {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n  } else if (c === 47) {\n    this.state = \"relative slash\";\n  } else if (c === 63) {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (c === 35) {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (isSpecial(this.url) && c === 92) {\n    this.parseError = true;\n    this.state = \"relative slash\";\n  } else {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\n    this.state = \"path\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"special authority ignore slashes\";\n  } else if (c === 47) {\n    this.state = \"authority\";\n  } else {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.state = \"path\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\n    this.state = \"special authority ignore slashes\";\n    ++this.pointer;\n  } else {\n    this.parseError = true;\n    this.state = \"special authority ignore slashes\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\n  if (c !== 47 && c !== 92) {\n    this.state = \"authority\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\n  if (c === 64) {\n    this.parseError = true;\n    if (this.atFlag) {\n      this.buffer = \"%40\" + this.buffer;\n    }\n    this.atFlag = true;\n\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\n    const len = countSymbols(this.buffer);\n    for (let pointer = 0; pointer < len; ++pointer) {\n      const codePoint = this.buffer.codePointAt(pointer);\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\n        this.passwordTokenSeenFlag = true;\n        continue;\n      }\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\n      if (this.passwordTokenSeenFlag) {\n        this.url.password += encodedCodePoints;\n      } else {\n        this.url.username += encodedCodePoints;\n      }\n    }\n    this.buffer = \"\";\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 || isSpecial(this.url) && c === 92) {\n    if (this.atFlag && this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    }\n    this.pointer -= countSymbols(this.buffer) + 1;\n    this.buffer = \"\";\n    this.state = \"host\";\n  } else {\n    this.buffer += cStr;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse hostname\"] = URLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\n  if (this.stateOverride && this.url.scheme === \"file\") {\n    --this.pointer;\n    this.state = \"file host\";\n  } else if (c === 58 && !this.arrFlag) {\n    if (this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    }\n    const host = parseHost(this.buffer, isNotSpecial(this.url));\n    if (host === failure) {\n      return failure;\n    }\n    this.url.host = host;\n    this.buffer = \"\";\n    this.state = \"port\";\n    if (this.stateOverride === \"hostname\") {\n      return false;\n    }\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 || isSpecial(this.url) && c === 92) {\n    --this.pointer;\n    if (isSpecial(this.url) && this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    } else if (this.stateOverride && this.buffer === \"\" && (includesCredentials(this.url) || this.url.port !== null)) {\n      this.parseError = true;\n      return false;\n    }\n    const host = parseHost(this.buffer, isNotSpecial(this.url));\n    if (host === failure) {\n      return failure;\n    }\n    this.url.host = host;\n    this.buffer = \"\";\n    this.state = \"path start\";\n    if (this.stateOverride) {\n      return false;\n    }\n  } else {\n    if (c === 91) {\n      this.arrFlag = true;\n    } else if (c === 93) {\n      this.arrFlag = false;\n    }\n    this.buffer += cStr;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\n  if (infra.isASCIIDigit(c)) {\n    this.buffer += cStr;\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 || isSpecial(this.url) && c === 92 || this.stateOverride) {\n    if (this.buffer !== \"\") {\n      const port = parseInt(this.buffer);\n      if (port > Math.pow(2, 16) - 1) {\n        this.parseError = true;\n        return failure;\n      }\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\n      this.buffer = \"\";\n    }\n    if (this.stateOverride) {\n      return false;\n    }\n    this.state = \"path start\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n  return true;\n};\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\nfunction startsWithWindowsDriveLetter(input, pointer) {\n  const length = input.length - pointer;\n  return length >= 2 && isWindowsDriveLetterCodePoints(input[pointer], input[pointer + 1]) && (length === 2 || fileOtherwiseCodePoints.has(input[pointer + 2]));\n}\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\n  this.url.scheme = \"file\";\n  if (c === 47 || c === 92) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"file slash\";\n  } else if (this.base !== null && this.base.scheme === \"file\") {\n    if (isNaN(c)) {\n      this.url.host = this.base.host;\n      this.url.path = this.base.path.slice();\n      this.url.query = this.base.query;\n    } else if (c === 63) {\n      this.url.host = this.base.host;\n      this.url.path = this.base.path.slice();\n      this.url.query = \"\";\n      this.state = \"query\";\n    } else if (c === 35) {\n      this.url.host = this.base.host;\n      this.url.path = this.base.path.slice();\n      this.url.query = this.base.query;\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    } else {\n      if (!startsWithWindowsDriveLetter(this.input, this.pointer)) {\n        this.url.host = this.base.host;\n        this.url.path = this.base.path.slice();\n        shortenPath(this.url);\n      } else {\n        this.parseError = true;\n      }\n      this.state = \"path\";\n      --this.pointer;\n    }\n  } else {\n    this.state = \"path\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\n  if (c === 47 || c === 92) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"file host\";\n  } else {\n    if (this.base !== null && this.base.scheme === \"file\" && !startsWithWindowsDriveLetter(this.input, this.pointer)) {\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\n        this.url.path.push(this.base.path[0]);\n      } else {\n        this.url.host = this.base.host;\n      }\n    }\n    this.state = \"path\";\n    --this.pointer;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\n    --this.pointer;\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\n      this.parseError = true;\n      this.state = \"path\";\n    } else if (this.buffer === \"\") {\n      this.url.host = \"\";\n      if (this.stateOverride) {\n        return false;\n      }\n      this.state = \"path start\";\n    } else {\n      let host = parseHost(this.buffer, isNotSpecial(this.url));\n      if (host === failure) {\n        return failure;\n      }\n      if (host === \"localhost\") {\n        host = \"\";\n      }\n      this.url.host = host;\n      if (this.stateOverride) {\n        return false;\n      }\n      this.buffer = \"\";\n      this.state = \"path start\";\n    }\n  } else {\n    this.buffer += cStr;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\n  if (isSpecial(this.url)) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"path\";\n    if (c !== 47 && c !== 92) {\n      --this.pointer;\n    }\n  } else if (!this.stateOverride && c === 63) {\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (!this.stateOverride && c === 35) {\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (c !== undefined) {\n    this.state = \"path\";\n    if (c !== 47) {\n      --this.pointer;\n    }\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\n  if (isNaN(c) || c === 47 || isSpecial(this.url) && c === 92 || !this.stateOverride && (c === 63 || c === 35)) {\n    if (isSpecial(this.url) && c === 92) {\n      this.parseError = true;\n    }\n    if (isDoubleDot(this.buffer)) {\n      shortenPath(this.url);\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\n        this.url.path.push(\"\");\n      }\n    } else if (isSingleDot(this.buffer) && c !== 47 && !(isSpecial(this.url) && c === 92)) {\n      this.url.path.push(\"\");\n    } else if (!isSingleDot(this.buffer)) {\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\n        if (this.url.host !== \"\" && this.url.host !== null) {\n          this.parseError = true;\n          this.url.host = \"\";\n        }\n        this.buffer = this.buffer[0] + \":\";\n      }\n      this.url.path.push(this.buffer);\n    }\n    this.buffer = \"\";\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\n        this.parseError = true;\n        this.url.path.shift();\n      }\n    }\n    if (c === 63) {\n      this.url.query = \"\";\n      this.state = \"query\";\n    }\n    if (c === 35) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    }\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n\n    if (c === 37 && (!infra.isASCIIHex(this.input[this.pointer + 1]) || !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\n  if (c === 63) {\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (c === 35) {\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else {\n    // TODO: Add: not a URL code point\n    if (!isNaN(c) && c !== 37) {\n      this.parseError = true;\n    }\n    if (c === 37 && (!infra.isASCIIHex(this.input[this.pointer + 1]) || !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n    if (!isNaN(c)) {\n      this.url.path[0] += percentEncodeChar(c, isC0ControlPercentEncode);\n    }\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\n  if (isNaN(c) || !this.stateOverride && c === 35) {\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\n      this.encodingOverride = \"utf-8\";\n    }\n    const buffer = Buffer.from(this.buffer); // TODO: Use encoding override instead\n    for (let i = 0; i < buffer.length; ++i) {\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 || buffer[i] === 0x3C || buffer[i] === 0x3E || buffer[i] === 0x27 && isSpecial(this.url)) {\n        this.url.query += percentEncode(buffer[i]);\n      } else {\n        this.url.query += String.fromCodePoint(buffer[i]);\n      }\n    }\n    this.buffer = \"\";\n    if (c === 35) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    }\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n    if (c === 37 && (!infra.isASCIIHex(this.input[this.pointer + 1]) || !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n    this.buffer += cStr;\n  }\n  return true;\n};\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\n  if (isNaN(c)) {// do nothing\n  } else if (c === 0x0) {\n    this.parseError = true;\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n    if (c === 37 && (!infra.isASCIIHex(this.input[this.pointer + 1]) || !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n    this.url.fragment += percentEncodeChar(c, isFragmentPercentEncode);\n  }\n  return true;\n};\nfunction serializeURL(url, excludeFragment) {\n  let output = url.scheme + \":\";\n  if (url.host !== null) {\n    output += \"//\";\n    if (url.username !== \"\" || url.password !== \"\") {\n      output += url.username;\n      if (url.password !== \"\") {\n        output += \":\" + url.password;\n      }\n      output += \"@\";\n    }\n    output += serializeHost(url.host);\n    if (url.port !== null) {\n      output += \":\" + url.port;\n    }\n  } else if (url.host === null && url.scheme === \"file\") {\n    output += \"//\";\n  }\n  if (url.cannotBeABaseURL) {\n    output += url.path[0];\n  } else {\n    for (const string of url.path) {\n      output += \"/\" + string;\n    }\n  }\n  if (url.query !== null) {\n    output += \"?\" + url.query;\n  }\n  if (!excludeFragment && url.fragment !== null) {\n    output += \"#\" + url.fragment;\n  }\n  return output;\n}\nfunction serializeOrigin(tuple) {\n  let result = tuple.scheme + \"://\";\n  result += serializeHost(tuple.host);\n  if (tuple.port !== null) {\n    result += \":\" + tuple.port;\n  }\n  return result;\n}\nmodule.exports.serializeURL = serializeURL;\nmodule.exports.serializeURLOrigin = function (url) {\n  // https://url.spec.whatwg.org/#concept-url-origin\n  switch (url.scheme) {\n    case \"blob\":\n      try {\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\n      } catch (e) {\n        // serializing an opaque origin returns \"null\"\n        return \"null\";\n      }\n    case \"ftp\":\n    case \"http\":\n    case \"https\":\n    case \"ws\":\n    case \"wss\":\n      return serializeOrigin({\n        scheme: url.scheme,\n        host: url.host,\n        port: url.port\n      });\n    case \"file\":\n      // The spec says:\n      // > Unfortunate as it is, this is left as an exercise to the reader. When in doubt, return a new opaque origin.\n      // Browsers tested so far:\n      // - Chrome says \"file://\", but treats file: URLs as cross-origin for most (all?) purposes; see e.g.\n      //   https://bugs.chromium.org/p/chromium/issues/detail?id=37586\n      // - Firefox says \"null\", but treats file: URLs as same-origin sometimes based on directory stuff; see\n      //   https://developer.mozilla.org/en-US/docs/Archive/Misc_top_level/Same-origin_policy_for_file:_URIs\n      return \"null\";\n    default:\n      // serializing an opaque origin returns \"null\"\n      return \"null\";\n  }\n};\nmodule.exports.basicURLParse = function (input, options) {\n  if (options === undefined) {\n    options = {};\n  }\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\n  if (usm.failure) {\n    return null;\n  }\n  return usm.url;\n};\nmodule.exports.setTheUsername = function (url, username) {\n  url.username = \"\";\n  const decoded = punycode.ucs2.decode(username);\n  for (let i = 0; i < decoded.length; ++i) {\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\n  }\n};\nmodule.exports.setThePassword = function (url, password) {\n  url.password = \"\";\n  const decoded = punycode.ucs2.decode(password);\n  for (let i = 0; i < decoded.length; ++i) {\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\n  }\n};\nmodule.exports.serializeHost = serializeHost;\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\nmodule.exports.serializeInteger = function (integer) {\n  return String(integer);\n};\nmodule.exports.parseURL = function (input, options) {\n  if (options === undefined) {\n    options = {};\n  }\n\n  // We don't handle blobs, so this just delegates:\n  return module.exports.basicURLParse(input, {\n    baseURL: options.baseURL,\n    encodingOverride: options.encodingOverride\n  });\n};","map":{"version":3,"names":["Buffer","require","punycode","infra","percentEncode","percentDecode","specialSchemes","ftp","file","http","https","ws","wss","failure","Symbol","countSymbols","str","ucs2","decode","length","at","input","idx","c","isNaN","undefined","String","fromCodePoint","isSingleDot","buffer","toLowerCase","isDoubleDot","isWindowsDriveLetterCodePoints","cp1","cp2","isASCIIAlpha","isWindowsDriveLetterString","string","codePointAt","isNormalizedWindowsDriveLetterString","containsForbiddenHostCodePoint","search","containsForbiddenHostCodePointExcludingPercent","isSpecialScheme","scheme","isSpecial","url","isNotSpecial","defaultPort","utf8PercentEncode","buf","from","i","isC0ControlPercentEncode","extraUserinfoPercentEncodeSet","Set","isUserinfoPercentEncode","isPathPercentEncode","has","extraFragmentPercentEncodeSet","isFragmentPercentEncode","extraPathPercentEncodeSet","percentEncodeChar","encodeSetPredicate","cStr","parseIPv4Number","R","charAt","substring","regex","test","parseInt","parseIPv4","parts","split","pop","numbers","part","n","push","Math","pow","ipv4","counter","serializeIPv4","address","output","floor","parseIPv6","pieceIndex","compress","pointer","value","isASCIIHex","numbersSeen","ipv4Piece","isASCIIDigit","number","swaps","temp","serializeIPv6","seqResult","findLongestZeroSequence","ignore0","separator","toString","parseHost","isNotSpecialArg","parseOpaqueHost","domain","asciiDomain","domainToASCII","ipv4Host","decoded","arr","maxIdx","maxLen","currStart","currLen","len","serializeHost","host","Array","result","trimControlChars","replace","trimTabAndNewline","shortenPath","path","isNormalizedWindowsDriveLetter","includesCredentials","username","password","cannotHaveAUsernamePasswordPort","cannotBeABaseURL","URLStateMachine","base","encodingOverride","stateOverride","parseError","port","query","fragment","res","state","atFlag","arrFlag","passwordTokenSeenFlag","ret","prototype","parseSchemeStart","parseScheme","isASCIIAlphanumeric","parseNoScheme","slice","parseSpecialRelativeOrAuthority","parsePathOrAuthority","parseRelative","parseRelativeSlash","parseSpecialAuthoritySlashes","parseSpecialAuthorityIgnoreSlashes","parseAuthority","codePoint","encodedCodePoints","parseHostName","parsePort","fileOtherwiseCodePoints","startsWithWindowsDriveLetter","parseFile","parseFileSlash","parseFileHost","parsePathStart","parsePath","shift","parseCannotBeABaseURLPath","parseQuery","parseFragment","serializeURL","excludeFragment","serializeOrigin","tuple","module","exports","serializeURLOrigin","parseURL","e","basicURLParse","options","usm","baseURL","setTheUsername","setThePassword","serializeInteger","integer"],"sources":["/Users/jonathon/.yarn/berry/cache/whatwg-url-without-unicode-npm-8.0.0-3-d98937d586-10c0.zip/node_modules/whatwg-url-without-unicode/lib/url-state-machine.js"],"sourcesContent":["\"use strict\";\nconst { Buffer } = require(\"buffer/\");\nconst punycode = require(\"punycode\");\n\nconst infra = require(\"./infra\");\nconst { percentEncode, percentDecode } = require(\"./urlencoded\");\n\nconst specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\nconst failure = Symbol(\"failure\");\n\nfunction countSymbols(str) {\n  return punycode.ucs2.decode(str).length;\n}\n\nfunction at(input, idx) {\n  const c = input[idx];\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\n}\n\nfunction isSingleDot(buffer) {\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\n}\n\nfunction isDoubleDot(buffer) {\n  buffer = buffer.toLowerCase();\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\n}\n\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\n  return infra.isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\n}\n\nfunction isWindowsDriveLetterString(string) {\n  return string.length === 2 && infra.isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\n}\n\nfunction isNormalizedWindowsDriveLetterString(string) {\n  return string.length === 2 && infra.isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\n}\n\nfunction containsForbiddenHostCodePoint(string) {\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\n}\n\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\n}\n\nfunction isSpecialScheme(scheme) {\n  return specialSchemes[scheme] !== undefined;\n}\n\nfunction isSpecial(url) {\n  return isSpecialScheme(url.scheme);\n}\n\nfunction isNotSpecial(url) {\n  return !isSpecialScheme(url.scheme);\n}\n\nfunction defaultPort(scheme) {\n  return specialSchemes[scheme];\n}\n\nfunction utf8PercentEncode(c) {\n  const buf = Buffer.from(c);\n\n  let str = \"\";\n\n  for (let i = 0; i < buf.length; ++i) {\n    str += percentEncode(buf[i]);\n  }\n\n  return str;\n}\n\nfunction isC0ControlPercentEncode(c) {\n  return c <= 0x1F || c > 0x7E;\n}\n\nconst extraUserinfoPercentEncodeSet =\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\nfunction isUserinfoPercentEncode(c) {\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\n}\n\nconst extraFragmentPercentEncodeSet = new Set([32, 34, 60, 62, 96]);\nfunction isFragmentPercentEncode(c) {\n  return isC0ControlPercentEncode(c) || extraFragmentPercentEncodeSet.has(c);\n}\n\nconst extraPathPercentEncodeSet = new Set([35, 63, 123, 125]);\nfunction isPathPercentEncode(c) {\n  return isFragmentPercentEncode(c) || extraPathPercentEncodeSet.has(c);\n}\n\nfunction percentEncodeChar(c, encodeSetPredicate) {\n  const cStr = String.fromCodePoint(c);\n\n  if (encodeSetPredicate(c)) {\n    return utf8PercentEncode(cStr);\n  }\n\n  return cStr;\n}\n\nfunction parseIPv4Number(input) {\n  let R = 10;\n\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\n    input = input.substring(2);\n    R = 16;\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\n    input = input.substring(1);\n    R = 8;\n  }\n\n  if (input === \"\") {\n    return 0;\n  }\n\n  let regex = /[^0-7]/;\n  if (R === 10) {\n    regex = /[^0-9]/;\n  }\n  if (R === 16) {\n    regex = /[^0-9A-Fa-f]/;\n  }\n\n  if (regex.test(input)) {\n    return failure;\n  }\n\n  return parseInt(input, R);\n}\n\nfunction parseIPv4(input) {\n  const parts = input.split(\".\");\n  if (parts[parts.length - 1] === \"\") {\n    if (parts.length > 1) {\n      parts.pop();\n    }\n  }\n\n  if (parts.length > 4) {\n    return input;\n  }\n\n  const numbers = [];\n  for (const part of parts) {\n    if (part === \"\") {\n      return input;\n    }\n    const n = parseIPv4Number(part);\n    if (n === failure) {\n      return input;\n    }\n\n    numbers.push(n);\n  }\n\n  for (let i = 0; i < numbers.length - 1; ++i) {\n    if (numbers[i] > 255) {\n      return failure;\n    }\n  }\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\n    return failure;\n  }\n\n  let ipv4 = numbers.pop();\n  let counter = 0;\n\n  for (const n of numbers) {\n    ipv4 += n * Math.pow(256, 3 - counter);\n    ++counter;\n  }\n\n  return ipv4;\n}\n\nfunction serializeIPv4(address) {\n  let output = \"\";\n  let n = address;\n\n  for (let i = 1; i <= 4; ++i) {\n    output = String(n % 256) + output;\n    if (i !== 4) {\n      output = \".\" + output;\n    }\n    n = Math.floor(n / 256);\n  }\n\n  return output;\n}\n\nfunction parseIPv6(input) {\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\n  let pieceIndex = 0;\n  let compress = null;\n  let pointer = 0;\n\n  input = punycode.ucs2.decode(input);\n\n  if (input[pointer] === 58) {\n    if (input[pointer + 1] !== 58) {\n      return failure;\n    }\n\n    pointer += 2;\n    ++pieceIndex;\n    compress = pieceIndex;\n  }\n\n  while (pointer < input.length) {\n    if (pieceIndex === 8) {\n      return failure;\n    }\n\n    if (input[pointer] === 58) {\n      if (compress !== null) {\n        return failure;\n      }\n      ++pointer;\n      ++pieceIndex;\n      compress = pieceIndex;\n      continue;\n    }\n\n    let value = 0;\n    let length = 0;\n\n    while (length < 4 && infra.isASCIIHex(input[pointer])) {\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\n      ++pointer;\n      ++length;\n    }\n\n    if (input[pointer] === 46) {\n      if (length === 0) {\n        return failure;\n      }\n\n      pointer -= length;\n\n      if (pieceIndex > 6) {\n        return failure;\n      }\n\n      let numbersSeen = 0;\n\n      while (input[pointer] !== undefined) {\n        let ipv4Piece = null;\n\n        if (numbersSeen > 0) {\n          if (input[pointer] === 46 && numbersSeen < 4) {\n            ++pointer;\n          } else {\n            return failure;\n          }\n        }\n\n        if (!infra.isASCIIDigit(input[pointer])) {\n          return failure;\n        }\n\n        while (infra.isASCIIDigit(input[pointer])) {\n          const number = parseInt(at(input, pointer));\n          if (ipv4Piece === null) {\n            ipv4Piece = number;\n          } else if (ipv4Piece === 0) {\n            return failure;\n          } else {\n            ipv4Piece = ipv4Piece * 10 + number;\n          }\n          if (ipv4Piece > 255) {\n            return failure;\n          }\n          ++pointer;\n        }\n\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\n\n        ++numbersSeen;\n\n        if (numbersSeen === 2 || numbersSeen === 4) {\n          ++pieceIndex;\n        }\n      }\n\n      if (numbersSeen !== 4) {\n        return failure;\n      }\n\n      break;\n    } else if (input[pointer] === 58) {\n      ++pointer;\n      if (input[pointer] === undefined) {\n        return failure;\n      }\n    } else if (input[pointer] !== undefined) {\n      return failure;\n    }\n\n    address[pieceIndex] = value;\n    ++pieceIndex;\n  }\n\n  if (compress !== null) {\n    let swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex !== 0 && swaps > 0) {\n      const temp = address[compress + swaps - 1];\n      address[compress + swaps - 1] = address[pieceIndex];\n      address[pieceIndex] = temp;\n      --pieceIndex;\n      --swaps;\n    }\n  } else if (compress === null && pieceIndex !== 8) {\n    return failure;\n  }\n\n  return address;\n}\n\nfunction serializeIPv6(address) {\n  let output = \"\";\n  const seqResult = findLongestZeroSequence(address);\n  const compress = seqResult.idx;\n  let ignore0 = false;\n\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\n    if (ignore0 && address[pieceIndex] === 0) {\n      continue;\n    } else if (ignore0) {\n      ignore0 = false;\n    }\n\n    if (compress === pieceIndex) {\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\n      output += separator;\n      ignore0 = true;\n      continue;\n    }\n\n    output += address[pieceIndex].toString(16);\n\n    if (pieceIndex !== 7) {\n      output += \":\";\n    }\n  }\n\n  return output;\n}\n\nfunction parseHost(input, isNotSpecialArg = false) {\n  if (input[0] === \"[\") {\n    if (input[input.length - 1] !== \"]\") {\n      return failure;\n    }\n\n    return parseIPv6(input.substring(1, input.length - 1));\n  }\n\n  if (isNotSpecialArg) {\n    return parseOpaqueHost(input);\n  }\n\n  const domain = percentDecode(Buffer.from(input)).toString();\n  const asciiDomain = domainToASCII(domain);\n  if (asciiDomain === failure) {\n    return failure;\n  }\n\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\n    return failure;\n  }\n\n  const ipv4Host = parseIPv4(asciiDomain);\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\n    return ipv4Host;\n  }\n\n  return asciiDomain;\n}\n\nfunction parseOpaqueHost(input) {\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\n    return failure;\n  }\n\n  let output = \"\";\n  const decoded = punycode.ucs2.decode(input);\n  for (let i = 0; i < decoded.length; ++i) {\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\n  }\n  return output;\n}\n\nfunction findLongestZeroSequence(arr) {\n  let maxIdx = null;\n  let maxLen = 1; // only find elements > 1\n  let currStart = null;\n  let currLen = 0;\n\n  for (let i = 0; i < arr.length; ++i) {\n    if (arr[i] !== 0) {\n      if (currLen > maxLen) {\n        maxIdx = currStart;\n        maxLen = currLen;\n      }\n\n      currStart = null;\n      currLen = 0;\n    } else {\n      if (currStart === null) {\n        currStart = i;\n      }\n      ++currLen;\n    }\n  }\n\n  // if trailing zeros\n  if (currLen > maxLen) {\n    maxIdx = currStart;\n    maxLen = currLen;\n  }\n\n  return {\n    idx: maxIdx,\n    len: maxLen\n  };\n}\n\nfunction serializeHost(host) {\n  if (typeof host === \"number\") {\n    return serializeIPv4(host);\n  }\n\n  // IPv6 serializer\n  if (host instanceof Array) {\n    return \"[\" + serializeIPv6(host) + \"]\";\n  }\n\n  return host;\n}\n\nfunction domainToASCII(domain) {\n  const result = domain;\n\n  if (result === null) {\n    return failure;\n  }\n  return result;\n}\n\nfunction trimControlChars(url) {\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\n}\n\nfunction trimTabAndNewline(url) {\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\n}\n\nfunction shortenPath(url) {\n  const { path } = url;\n  if (path.length === 0) {\n    return;\n  }\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\n    return;\n  }\n\n  path.pop();\n}\n\nfunction includesCredentials(url) {\n  return url.username !== \"\" || url.password !== \"\";\n}\n\nfunction cannotHaveAUsernamePasswordPort(url) {\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\n}\n\nfunction isNormalizedWindowsDriveLetter(string) {\n  return /^[A-Za-z]:$/.test(string);\n}\n\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\n  this.pointer = 0;\n  this.input = input;\n  this.base = base || null;\n  this.encodingOverride = encodingOverride || \"utf-8\";\n  this.stateOverride = stateOverride;\n  this.url = url;\n  this.failure = false;\n  this.parseError = false;\n\n  if (!this.url) {\n    this.url = {\n      scheme: \"\",\n      username: \"\",\n      password: \"\",\n      host: null,\n      port: null,\n      path: [],\n      query: null,\n      fragment: null,\n\n      cannotBeABaseURL: false\n    };\n\n    const res = trimControlChars(this.input);\n    if (res !== this.input) {\n      this.parseError = true;\n    }\n    this.input = res;\n  }\n\n  const res = trimTabAndNewline(this.input);\n  if (res !== this.input) {\n    this.parseError = true;\n  }\n  this.input = res;\n\n  this.state = stateOverride || \"scheme start\";\n\n  this.buffer = \"\";\n  this.atFlag = false;\n  this.arrFlag = false;\n  this.passwordTokenSeenFlag = false;\n\n  this.input = punycode.ucs2.decode(this.input);\n\n  for (; this.pointer <= this.input.length; ++this.pointer) {\n    const c = this.input[this.pointer];\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\n\n    // exec state machine\n    const ret = this[\"parse \" + this.state](c, cStr);\n    if (!ret) {\n      break; // terminate algorithm\n    } else if (ret === failure) {\n      this.failure = true;\n      break;\n    }\n  }\n}\n\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\n  if (infra.isASCIIAlpha(c)) {\n    this.buffer += cStr.toLowerCase();\n    this.state = \"scheme\";\n  } else if (!this.stateOverride) {\n    this.state = \"no scheme\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\n  if (infra.isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\n    this.buffer += cStr.toLowerCase();\n  } else if (c === 58) {\n    if (this.stateOverride) {\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\n        return false;\n      }\n\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\n        return false;\n      }\n\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\n        return false;\n      }\n\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\n        return false;\n      }\n    }\n    this.url.scheme = this.buffer;\n    if (this.stateOverride) {\n      if (this.url.port === defaultPort(this.url.scheme)) {\n        this.url.port = null;\n      }\n      return false;\n    }\n    this.buffer = \"\";\n    if (this.url.scheme === \"file\") {\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\n        this.parseError = true;\n      }\n      this.state = \"file\";\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\n      this.state = \"special relative or authority\";\n    } else if (isSpecial(this.url)) {\n      this.state = \"special authority slashes\";\n    } else if (this.input[this.pointer + 1] === 47) {\n      this.state = \"path or authority\";\n      ++this.pointer;\n    } else {\n      this.url.cannotBeABaseURL = true;\n      this.url.path.push(\"\");\n      this.state = \"cannot-be-a-base-URL path\";\n    }\n  } else if (!this.stateOverride) {\n    this.buffer = \"\";\n    this.state = \"no scheme\";\n    this.pointer = -1;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\n    return failure;\n  } else if (this.base.cannotBeABaseURL && c === 35) {\n    this.url.scheme = this.base.scheme;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n    this.url.fragment = \"\";\n    this.url.cannotBeABaseURL = true;\n    this.state = \"fragment\";\n  } else if (this.base.scheme === \"file\") {\n    this.state = \"file\";\n    --this.pointer;\n  } else {\n    this.state = \"relative\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\n    this.state = \"special authority ignore slashes\";\n    ++this.pointer;\n  } else {\n    this.parseError = true;\n    this.state = \"relative\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\n  if (c === 47) {\n    this.state = \"authority\";\n  } else {\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\n  this.url.scheme = this.base.scheme;\n  if (isNaN(c)) {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n  } else if (c === 47) {\n    this.state = \"relative slash\";\n  } else if (c === 63) {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (c === 35) {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (isSpecial(this.url) && c === 92) {\n    this.parseError = true;\n    this.state = \"relative slash\";\n  } else {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\n\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"special authority ignore slashes\";\n  } else if (c === 47) {\n    this.state = \"authority\";\n  } else {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\n    this.state = \"special authority ignore slashes\";\n    ++this.pointer;\n  } else {\n    this.parseError = true;\n    this.state = \"special authority ignore slashes\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\n  if (c !== 47 && c !== 92) {\n    this.state = \"authority\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\n  if (c === 64) {\n    this.parseError = true;\n    if (this.atFlag) {\n      this.buffer = \"%40\" + this.buffer;\n    }\n    this.atFlag = true;\n\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\n    const len = countSymbols(this.buffer);\n    for (let pointer = 0; pointer < len; ++pointer) {\n      const codePoint = this.buffer.codePointAt(pointer);\n\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\n        this.passwordTokenSeenFlag = true;\n        continue;\n      }\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\n      if (this.passwordTokenSeenFlag) {\n        this.url.password += encodedCodePoints;\n      } else {\n        this.url.username += encodedCodePoints;\n      }\n    }\n    this.buffer = \"\";\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\n             (isSpecial(this.url) && c === 92)) {\n    if (this.atFlag && this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    }\n    this.pointer -= countSymbols(this.buffer) + 1;\n    this.buffer = \"\";\n    this.state = \"host\";\n  } else {\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse hostname\"] =\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\n  if (this.stateOverride && this.url.scheme === \"file\") {\n    --this.pointer;\n    this.state = \"file host\";\n  } else if (c === 58 && !this.arrFlag) {\n    if (this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    }\n\n    const host = parseHost(this.buffer, isNotSpecial(this.url));\n    if (host === failure) {\n      return failure;\n    }\n\n    this.url.host = host;\n    this.buffer = \"\";\n    this.state = \"port\";\n    if (this.stateOverride === \"hostname\") {\n      return false;\n    }\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\n             (isSpecial(this.url) && c === 92)) {\n    --this.pointer;\n    if (isSpecial(this.url) && this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    } else if (this.stateOverride && this.buffer === \"\" &&\n               (includesCredentials(this.url) || this.url.port !== null)) {\n      this.parseError = true;\n      return false;\n    }\n\n    const host = parseHost(this.buffer, isNotSpecial(this.url));\n    if (host === failure) {\n      return failure;\n    }\n\n    this.url.host = host;\n    this.buffer = \"\";\n    this.state = \"path start\";\n    if (this.stateOverride) {\n      return false;\n    }\n  } else {\n    if (c === 91) {\n      this.arrFlag = true;\n    } else if (c === 93) {\n      this.arrFlag = false;\n    }\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\n  if (infra.isASCIIDigit(c)) {\n    this.buffer += cStr;\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\n             (isSpecial(this.url) && c === 92) ||\n             this.stateOverride) {\n    if (this.buffer !== \"\") {\n      const port = parseInt(this.buffer);\n      if (port > Math.pow(2, 16) - 1) {\n        this.parseError = true;\n        return failure;\n      }\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\n      this.buffer = \"\";\n    }\n    if (this.stateOverride) {\n      return false;\n    }\n    this.state = \"path start\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n\n  return true;\n};\n\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\n\nfunction startsWithWindowsDriveLetter(input, pointer) {\n  const length = input.length - pointer;\n  return length >= 2 &&\n    isWindowsDriveLetterCodePoints(input[pointer], input[pointer + 1]) &&\n    (length === 2 || fileOtherwiseCodePoints.has(input[pointer + 2]));\n}\n\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\n  this.url.scheme = \"file\";\n\n  if (c === 47 || c === 92) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"file slash\";\n  } else if (this.base !== null && this.base.scheme === \"file\") {\n    if (isNaN(c)) {\n      this.url.host = this.base.host;\n      this.url.path = this.base.path.slice();\n      this.url.query = this.base.query;\n    } else if (c === 63) {\n      this.url.host = this.base.host;\n      this.url.path = this.base.path.slice();\n      this.url.query = \"\";\n      this.state = \"query\";\n    } else if (c === 35) {\n      this.url.host = this.base.host;\n      this.url.path = this.base.path.slice();\n      this.url.query = this.base.query;\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    } else {\n      if (!startsWithWindowsDriveLetter(this.input, this.pointer)) {\n        this.url.host = this.base.host;\n        this.url.path = this.base.path.slice();\n        shortenPath(this.url);\n      } else {\n        this.parseError = true;\n      }\n\n      this.state = \"path\";\n      --this.pointer;\n    }\n  } else {\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\n  if (c === 47 || c === 92) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"file host\";\n  } else {\n    if (this.base !== null && this.base.scheme === \"file\" &&\n        !startsWithWindowsDriveLetter(this.input, this.pointer)) {\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\n        this.url.path.push(this.base.path[0]);\n      } else {\n        this.url.host = this.base.host;\n      }\n    }\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\n    --this.pointer;\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\n      this.parseError = true;\n      this.state = \"path\";\n    } else if (this.buffer === \"\") {\n      this.url.host = \"\";\n      if (this.stateOverride) {\n        return false;\n      }\n      this.state = \"path start\";\n    } else {\n      let host = parseHost(this.buffer, isNotSpecial(this.url));\n      if (host === failure) {\n        return failure;\n      }\n      if (host === \"localhost\") {\n        host = \"\";\n      }\n      this.url.host = host;\n\n      if (this.stateOverride) {\n        return false;\n      }\n\n      this.buffer = \"\";\n      this.state = \"path start\";\n    }\n  } else {\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\n  if (isSpecial(this.url)) {\n    if (c === 92) {\n      this.parseError = true;\n    }\n    this.state = \"path\";\n\n    if (c !== 47 && c !== 92) {\n      --this.pointer;\n    }\n  } else if (!this.stateOverride && c === 63) {\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (!this.stateOverride && c === 35) {\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (c !== undefined) {\n    this.state = \"path\";\n    if (c !== 47) {\n      --this.pointer;\n    }\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\n      (!this.stateOverride && (c === 63 || c === 35))) {\n    if (isSpecial(this.url) && c === 92) {\n      this.parseError = true;\n    }\n\n    if (isDoubleDot(this.buffer)) {\n      shortenPath(this.url);\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\n        this.url.path.push(\"\");\n      }\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\n               !(isSpecial(this.url) && c === 92)) {\n      this.url.path.push(\"\");\n    } else if (!isSingleDot(this.buffer)) {\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\n        if (this.url.host !== \"\" && this.url.host !== null) {\n          this.parseError = true;\n          this.url.host = \"\";\n        }\n        this.buffer = this.buffer[0] + \":\";\n      }\n      this.url.path.push(this.buffer);\n    }\n    this.buffer = \"\";\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\n        this.parseError = true;\n        this.url.path.shift();\n      }\n    }\n    if (c === 63) {\n      this.url.query = \"\";\n      this.state = \"query\";\n    }\n    if (c === 35) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    }\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n\n    if (c === 37 &&\n      (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n        !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\n  if (c === 63) {\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (c === 35) {\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else {\n    // TODO: Add: not a URL code point\n    if (!isNaN(c) && c !== 37) {\n      this.parseError = true;\n    }\n\n    if (c === 37 &&\n        (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n         !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    if (!isNaN(c)) {\n      this.url.path[0] += percentEncodeChar(c, isC0ControlPercentEncode);\n    }\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\n      this.encodingOverride = \"utf-8\";\n    }\n\n    const buffer = Buffer.from(this.buffer); // TODO: Use encoding override instead\n    for (let i = 0; i < buffer.length; ++i) {\n      if (buffer[i] < 0x21 ||\n          buffer[i] > 0x7E ||\n          buffer[i] === 0x22 || buffer[i] === 0x23 || buffer[i] === 0x3C || buffer[i] === 0x3E ||\n          (buffer[i] === 0x27 && isSpecial(this.url))) {\n        this.url.query += percentEncode(buffer[i]);\n      } else {\n        this.url.query += String.fromCodePoint(buffer[i]);\n      }\n    }\n\n    this.buffer = \"\";\n    if (c === 35) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    }\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n    if (c === 37 &&\n      (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n        !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\n  if (isNaN(c)) { // do nothing\n  } else if (c === 0x0) {\n    this.parseError = true;\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n    if (c === 37 &&\n      (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n        !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    this.url.fragment += percentEncodeChar(c, isFragmentPercentEncode);\n  }\n\n  return true;\n};\n\nfunction serializeURL(url, excludeFragment) {\n  let output = url.scheme + \":\";\n  if (url.host !== null) {\n    output += \"//\";\n\n    if (url.username !== \"\" || url.password !== \"\") {\n      output += url.username;\n      if (url.password !== \"\") {\n        output += \":\" + url.password;\n      }\n      output += \"@\";\n    }\n\n    output += serializeHost(url.host);\n\n    if (url.port !== null) {\n      output += \":\" + url.port;\n    }\n  } else if (url.host === null && url.scheme === \"file\") {\n    output += \"//\";\n  }\n\n  if (url.cannotBeABaseURL) {\n    output += url.path[0];\n  } else {\n    for (const string of url.path) {\n      output += \"/\" + string;\n    }\n  }\n\n  if (url.query !== null) {\n    output += \"?\" + url.query;\n  }\n\n  if (!excludeFragment && url.fragment !== null) {\n    output += \"#\" + url.fragment;\n  }\n\n  return output;\n}\n\nfunction serializeOrigin(tuple) {\n  let result = tuple.scheme + \"://\";\n  result += serializeHost(tuple.host);\n\n  if (tuple.port !== null) {\n    result += \":\" + tuple.port;\n  }\n\n  return result;\n}\n\nmodule.exports.serializeURL = serializeURL;\n\nmodule.exports.serializeURLOrigin = function (url) {\n  // https://url.spec.whatwg.org/#concept-url-origin\n  switch (url.scheme) {\n    case \"blob\":\n      try {\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\n      } catch (e) {\n        // serializing an opaque origin returns \"null\"\n        return \"null\";\n      }\n    case \"ftp\":\n    case \"http\":\n    case \"https\":\n    case \"ws\":\n    case \"wss\":\n      return serializeOrigin({\n        scheme: url.scheme,\n        host: url.host,\n        port: url.port\n      });\n    case \"file\":\n      // The spec says:\n      // > Unfortunate as it is, this is left as an exercise to the reader. When in doubt, return a new opaque origin.\n      // Browsers tested so far:\n      // - Chrome says \"file://\", but treats file: URLs as cross-origin for most (all?) purposes; see e.g.\n      //   https://bugs.chromium.org/p/chromium/issues/detail?id=37586\n      // - Firefox says \"null\", but treats file: URLs as same-origin sometimes based on directory stuff; see\n      //   https://developer.mozilla.org/en-US/docs/Archive/Misc_top_level/Same-origin_policy_for_file:_URIs\n      return \"null\";\n    default:\n      // serializing an opaque origin returns \"null\"\n      return \"null\";\n  }\n};\n\nmodule.exports.basicURLParse = function (input, options) {\n  if (options === undefined) {\n    options = {};\n  }\n\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\n  if (usm.failure) {\n    return null;\n  }\n\n  return usm.url;\n};\n\nmodule.exports.setTheUsername = function (url, username) {\n  url.username = \"\";\n  const decoded = punycode.ucs2.decode(username);\n  for (let i = 0; i < decoded.length; ++i) {\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\n  }\n};\n\nmodule.exports.setThePassword = function (url, password) {\n  url.password = \"\";\n  const decoded = punycode.ucs2.decode(password);\n  for (let i = 0; i < decoded.length; ++i) {\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\n  }\n};\n\nmodule.exports.serializeHost = serializeHost;\n\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\n\nmodule.exports.serializeInteger = function (integer) {\n  return String(integer);\n};\n\nmodule.exports.parseURL = function (input, options) {\n  if (options === undefined) {\n    options = {};\n  }\n\n  // We don't handle blobs, so this just delegates:\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}